{"mappings":"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","sources":["src/extension/index.ts","package.json","src/extension/OBSControl.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/helpers/utils.ts","src/extension/Logger.ts","node_modules/@swc/helpers/esm/_object_spread.js","node_modules/@swc/helpers/esm/_define_property.js","node_modules/@swc/helpers/esm/_object_spread_props.js"],"sourcesContent":["import NodeCG from '@nodecg/types';\r\nimport Package from '../../package.json'\r\nimport { OBSControl } from './OBSControl';\r\nimport { ObsData } from 'schemas/obsData';\r\nimport { BundleImages } from 'schemas/bundleImages'; \r\nimport { TimeLogger } from './Logger';\r\nimport { updateBundleImages } from '../helpers/utils';\r\n\r\nexport = async (nodecg: NodeCG.ServerAPI) => {\r\n\r\n\tconsole.log(`You're using ${Package.name} Version ${Package.version} (${Package.squidwest.month})`);\r\n\r\n\tconst bundleImages = nodecg.Replicant<BundleImages>('bundleImages', { defaultValue: { bundles: [], selectedBundle: \"\", images: [] }});\r\n\r\n\tbundleImages.value = updateBundleImages(bundleImages.value);\r\n\r\n\tconst timeLogger = new TimeLogger(`${Package.name}-Time`, true);\r\n\t\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\tconst onConnect = (obs: OBSControl) => {\r\n\t\tnodecg.sendMessage('obsConnectionStatus', { isConnected: true });\r\n\t}\r\n\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\tconst onDisconnect = (obs: OBSControl) => {\r\n\t\tnodecg.sendMessage('obsConnectionStatus', { isConnected: false });\r\n\t}\r\n\r\n\tconst onCurrentProgramSceneChanged = (obs: OBSControl, event: {sceneName: string, sceneUuid: string}) => {\r\n\t\tconst timeStamp = Date.now();\r\n\t\tnodecg.sendMessage('onSceneChange', { sceneName: event.sceneName, timeStamp: timeStamp});\r\n\r\n\t\ttimeLogger.addTime(`On OBS Scene: ${event.sceneName}`, timeStamp);\r\n\t}\r\n\r\n\tconst onStreamStateChanged = (obs: OBSControl, event: { outputActive: boolean; outputState: string; }) => {\r\n\t\tif(event.outputActive && event.outputState === 'OBS_WEBSOCKET_OUTPUT_STARTED') {\r\n\t\t\ttimeLogger.startRecord(\"Stream Started\", Date.now());\r\n\t\t}\r\n\t\telse if(!event.outputActive && event.outputState === 'OBS_WEBSOCKET_OUTPUT_STOPPED') {\r\n\t\t\ttimeLogger.endRecord(\"Stream Ended\", Date.now());\r\n\t\t}\r\n\t};\r\n\r\n\tconst obs = new OBSControl({ onConnect, onDisconnect, onCurrentProgramSceneChanged, onStreamStateChanged });\r\n\r\n\tnodecg.listenFor('setObsConnection', (value: { connect: boolean, settings: ObsData }, ack) => {\r\n\r\n\t\tif(value.connect) {\r\n\r\n\t\t\tobs.connect(value.settings.serverIp, value.settings.serverPort, value.settings.serverPassword).then(() => {\r\n\t\t\t\tif(ack && !ack.handled) {\r\n\t\t\t\t\tack(null, \"OBS Connection Successful!\");\r\n\t\t\t\t}\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\tif(ack && !ack.handled) {\r\n\t\t\t\t\tack(e);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t})\r\n\r\n\tnodecg.listenFor('updateBundleImages', (oldValue: BundleImages) => {\r\n\t\tbundleImages.value = updateBundleImages(oldValue);\r\n\t})\r\n\r\n\t/*\r\n\tconst obs = new OBSControl(nodecg);\r\n\r\n\tnodecg.listenFor('Hooray', () => {\r\n\t\tconst easeInExpo = (alpha: number): number => {\r\n            return (alpha <= 0) ? 0 : Math.pow(2, 10 * alpha - 10);\r\n        }\r\n\r\n\t\tconst easeOutExpo = (alpha: number): number => {\r\n\t\t\treturn (alpha >= 1) ? 1 : 1 - Math.pow(2, -10 * alpha);\r\n\t\t}\r\n\r\n\t\tobs.setCurrentProgramScene('Game');\r\n\t\tobs.transitionInputVolume('Music', 3000, -100, 0, easeInExpo);\r\n\t\tobs.transitionInputVolume('Bottom Video Game', 3000, 0, -100, easeOutExpo);\r\n\t});*/\r\n}","{\r\n  \"name\": \"squidwest-layout-controls\",\r\n  \"version\": \"2.0.0\",\r\n  \"squidwest\": {\r\n    \"month\": \"July 2025\"\r\n  },\r\n  \"description\": \"NodeCG Dashboard system for SquidWest Splatoon events\",\r\n  \"homepage\": \"\",\r\n  \"author\": {\r\n    \"name\": \"EpicYoshiMaster\",\r\n    \"email\": \"epicyoshim@gmail.com\",\r\n    \"url\": \"\"\r\n  },\r\n  \"files\": [\r\n    \"dashboard\",\r\n    \"graphics\",\r\n    \"extension.js\",\r\n    \"extension\"\r\n  ],\r\n  \"keywords\": [\r\n    \"nodecg-bundle\"\r\n  ],\r\n  \"nodecg\": {\r\n    \"compatibleRange\": \"^2.0.0\",\r\n    \"dashboardPanels\": [\r\n      {\r\n        \"name\": \"credits\",\r\n        \"title\": \"Credits\",\r\n        \"width\": 3,\r\n        \"file\": \"credits.html\",\r\n        \"workspace\": \"1. Stream Tech\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"intermission\",\r\n        \"title\": \"Intermission Screen\",\r\n        \"width\": 3,\r\n        \"file\": \"intermission.html\",\r\n        \"workspace\": \"1. Stream Tech\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"commentators\",\r\n        \"title\": \"Commentators Information\",\r\n        \"width\": 3,\r\n        \"file\": \"commentators.html\",\r\n        \"workspace\": \"1. Stream Tech\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"time\",\r\n        \"title\": \"Time Information\",\r\n        \"width\": 3,\r\n        \"file\": \"time.html\",\r\n        \"workspace\": \"1. Stream Tech\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"eventinformation\",\r\n        \"title\": \"Event Information\",\r\n        \"width\": 3,\r\n        \"file\": \"eventinformation.html\",\r\n        \"workspace\": \"2. Settings\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"socials\",\r\n        \"title\": \"Socials Information\",\r\n        \"width\": 3,\r\n        \"file\": \"socials.html\",\r\n        \"workspace\": \"2. Settings\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"obs\",\r\n        \"title\": \"OBS Settings\",\r\n        \"width\": 3,\r\n        \"file\": \"obssettings.html\",\r\n        \"workspace\": \"2. Settings\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"scores\",\r\n        \"title\": \"Match Information\",\r\n        \"width\": 3,\r\n        \"file\": \"scores.html\",\r\n        \"workspace\": \"1. Stream Tech\",\r\n        \"headerColor\": \"#525F78\"\r\n      }\r\n    ]\r\n  },\r\n  \"browserslist\": {\r\n    \"production\": [\r\n      \">0.5%\",\r\n      \"not dead\",\r\n      \"not op_mini all\"\r\n    ],\r\n    \"development\": [\r\n      \"last 1 chrome version\",\r\n      \"last 1 firefox version\",\r\n      \"last 1 safari version\"\r\n    ]\r\n  },\r\n  \"scripts\": {\r\n    \"build\": \"node scripts/build.mjs --all\",\r\n    \"build:extension\": \"node scripts/build.mjs --extension\",\r\n    \"watch\": \"node scripts/build.mjs --all --watch\",\r\n    \"watch:browser\": \"node scripts/build.mjs --dashboard --graphics --watch\",\r\n    \"watch:schemas\": \"node scripts/build.mjs --schemas --watch\",\r\n    \"dev\": \"concurrently --kill-others \\\"npm run watch:schemas\\\" \\\"npm run watch:browser\\\" \\\"nodemon\\\"\",\r\n    \"generate-schema-types\": \"trash src/types/schemas && nodecg schema-types\",\r\n    \"lint\": \"npx eslint src\"\r\n  },\r\n  \"dependencies\": {\r\n    \"@nodecg/react-hooks\": \"^1.0.3\",\r\n    \"@phosphor-icons/react\": \"^2.1.7\",\r\n    \"@types/react\": \"*\",\r\n    \"@types/react-dom\": \"*\",\r\n    \"is-image\": \"^4.0.0\",\r\n    \"lodash\": \"^4.17.21\",\r\n    \"obs-websocket-js\": \"^5.0.6\",\r\n    \"path-browserify\": \"^1.0.1\",\r\n    \"react\": \"*\",\r\n    \"react-dom\": \"*\",\r\n    \"react-dropzone\": \"^14.3.8\",\r\n    \"styled-components\": \"^6.1.13\",\r\n    \"ts-node\": \"*\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@babel/cli\": \"^7.26.4\",\r\n    \"@babel/core\": \"^7.26.10\",\r\n    \"@eslint/compat\": \"^1.2.8\",\r\n    \"@eslint/css\": \"^0.7.0\",\r\n    \"@eslint/eslintrc\": \"^3.3.1\",\r\n    \"@eslint/js\": \"^9.24.0\",\r\n    \"@nodecg/types\": \"^2.0.0\",\r\n    \"@parcel/config-default\": \"*\",\r\n    \"@parcel/core\": \"*\",\r\n    \"@parcel/reporter-cli\": \"*\",\r\n    \"@parcel/validator-typescript\": \"*\",\r\n    \"@types/node\": \"^18\",\r\n    \"babel-plugin-styled-components\": \"^2.1.4\",\r\n    \"concurrently\": \"*\",\r\n    \"eslint\": \"^9.24.0\",\r\n    \"eslint-plugin-react\": \"^7.37.5\",\r\n    \"eslint-plugin-react-hooks\": \"^5.2.0\",\r\n    \"glob\": \"^10.2.7\",\r\n    \"globals\": \"^16.0.0\",\r\n    \"nodemon\": \"*\",\r\n    \"trash-cli\": \"*\",\r\n    \"typescript\": \"^5.1.3\",\r\n    \"typescript-eslint\": \"^8.30.1\"\r\n  },\r\n  \"license\": \"MIT\"\r\n}\r\n","import OBSWebSocket, { OBSEventTypes } from 'obs-websocket-js';\r\nimport { lerp, clamp } from '../helpers/utils';\r\n\r\nexport type OBSCallback = (obs: OBSControl) => void;\r\nexport type OBSEventCallback<E extends keyof OBSEventTypes> = (obs: OBSControl, event: OBSEventTypes[E]) => void;\r\n\r\nexport type OBSEventCalls = {\r\n    onConnect?: OBSCallback;\r\n    onDisconnect?: OBSCallback;\r\n    onCurrentProgramSceneChanged?: OBSEventCallback<'CurrentProgramSceneChanged'>;\r\n    onStreamStateChanged?: OBSEventCallback<'StreamStateChanged'>;\r\n    //Expand this list as necessities grow\r\n}\r\n\r\nexport class OBSControl {\r\n    private socket: OBSWebSocket;\r\n    private eventCalls: OBSEventCalls;\r\n\r\n    constructor(eventCalls: OBSEventCalls) {\r\n        this.socket = new OBSWebSocket();\r\n        this.eventCalls = eventCalls;\r\n    }\r\n\r\n    async connect(ip: string, port: string, password?: string): Promise<void> {\r\n\r\n        try {\r\n            await this.socket.connect(`ws://${ip}:${port}`, password);\r\n\r\n            console.log(\"OBS Connected\");\r\n\r\n            if(this.eventCalls.onConnect) {\r\n                this.eventCalls.onConnect(this);\r\n            }\r\n\r\n            const onExitStarted = () => { \r\n                console.log(\"OBS Disconnected\");\r\n\r\n                if(this.eventCalls.onDisconnect) {\r\n                    this.eventCalls.onDisconnect(this); \r\n                }\r\n                \r\n                this.socket.off('ExitStarted', onExitStarted);\r\n            }\r\n\r\n            this.socket.on('ExitStarted', onExitStarted)\r\n                .on('CurrentProgramSceneChanged', this.onCurrentProgramSceneChanged.bind(this))\r\n                .on('StreamStateChanged', this.onStreamStateChanged.bind(this));\r\n        }\r\n        catch(e) {\r\n            throw new Error(`${e instanceof Error ? e.message : String(e)}`);\r\n        }\r\n    }\r\n\r\n    //\r\n    // Events\r\n    //\r\n\r\n    private onCurrentProgramSceneChanged(event: { sceneName: string, sceneUuid: string }) {\r\n        if(this.eventCalls.onCurrentProgramSceneChanged) { \r\n            this.eventCalls.onCurrentProgramSceneChanged(this, event);\r\n        }\r\n    }\r\n\r\n    private onStreamStateChanged(event: { outputActive: boolean, outputState: string }) {\r\n        if(this.eventCalls.onStreamStateChanged) { \r\n            this.eventCalls.onStreamStateChanged(this, event);\r\n        }\r\n    }\r\n\r\n    //\r\n    // Requests\r\n    //\r\n\r\n    setCurrentProgramScene(scene: string): Promise<void> {\r\n        return this.socket.call('SetCurrentProgramScene', {sceneName: scene});\r\n    }\r\n\r\n    async transitionInputVolume(input: string, transitionTime: number, targetDb: number, startDb?: number, interpFunc?: (alpha: number) => number) {\r\n        if(startDb) {\r\n            await this.setInputVolume(input, startDb);\r\n        }\r\n\r\n        const { inputVolumeDb } = await this.getInputVolume(input);\r\n\r\n        const startTime = new Date().getTime();\r\n\r\n        const setVolumeInterval = setInterval(() => { \r\n            const alpha = (new Date().getTime() - startTime) / transitionTime;\r\n            this.setInputVolume(input, lerp(inputVolumeDb, targetDb, clamp(interpFunc ? interpFunc(alpha) : alpha, 0, 1)));\r\n            console.log(`${input} - alpha: ${alpha}, dB: ${lerp(inputVolumeDb, targetDb, clamp(interpFunc ? interpFunc(alpha) : alpha, 0, 1))}`);\r\n        }, 10);\r\n\r\n        await setTimeout(() => {\r\n            clearInterval(setVolumeInterval)\r\n            this.setInputVolume(input, targetDb);\r\n            console.log(`${input} - DONE, dB: ${targetDb}`);\r\n        }, transitionTime);\r\n    }\r\n\r\n    getInputVolume(input: string): Promise<{inputVolumeDb: number, inputVolumeMul: number}> {\r\n        return this.socket.call('GetInputVolume', {inputName: input});\r\n    }\r\n\r\n    setInputVolume(input: string, dB: number): Promise<void> {\r\n        return this.socket.call('SetInputVolume', {inputName: input, inputVolumeDb: dB});\r\n    }\r\n}","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import { ColorInfo } from 'schemas/matchData';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\nimport { BundleImages } from 'schemas/bundleImages';\r\n\r\nexport const formatTimeHMSC = (ms: number): string => {\r\n\tms = ms > 0 ? ms : 0;\r\n\r\n\tconst hour = Math.floor(ms / 60 / 60 / 1000);\r\n\tms = ms % (60 * 60 * 1000);\r\n\r\n\tconst minute = Math.floor(ms / 60 / 1000);\r\n\tms = ms % (60 * 1000);\r\n\r\n\tconst second = Math.floor(ms / 1000);\r\n\tms = ms % 1000;\r\n\r\n\tconst centiseconds = Math.floor(ms / 10);\r\n\r\n\treturn `${hour}:${minute < 10 ? `0${minute}` : minute}:${second < 10 ? `0${second}` : second}.${centiseconds < 10 ? `0${centiseconds}` : centiseconds}`\r\n}\r\n\r\nexport const formatDateHM = (date: Date) => {\r\n\treturn date.getHours() + \":\" + ((date.getMinutes() < 10) ? \"0\" : \"\") + date.getMinutes();\r\n};\r\n\r\nexport const formatDateMDY = (date: Date) => {\r\n\treturn (date.getMonth() + 1) + \"/\" + date.getDate() + \"/\" + date.getFullYear();\r\n}\r\n\r\nexport const modulo = (dividend: number, divisor: number) => {\r\n\treturn ((dividend % divisor) + divisor) % divisor;\r\n}\r\n\r\nexport const getIndexColor = (index: number, list: ColorInfo[], swap: boolean) => {\r\n\treturn !swap ? list[modulo(index, list.length)].teamA : list[modulo(index, list.length)].teamB;\r\n}\r\n\r\nexport const lerp = (a: number, b: number, alpha: number) => { return a + alpha * (b - a)};\r\n\r\nexport const clamp = (value: number, min: number, max: number) => { return Math.min(Math.max(value, min), max)};\r\n\r\n/**\r\n * acceptedFiles can only be 1 file, it is an array to facilitate easy use of react-dropzone\r\n */\r\nexport const fileToJSON = (acceptedFiles: File[], onImport: (json: unknown) => void, onError: (error: string) => void) => {\r\n\tif(acceptedFiles.length > 1)\r\n\t{\r\n\t\tonError(\"Only one file can be imported at a time.\");\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(acceptedFiles.length == 0)\r\n\t{\r\n\t\tonError(\"An unknown issue occurred while trying to load the file. (No files were accepted?)\");\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst [ file ] = acceptedFiles;\r\n\r\n\tfile.text().then((value: string) => {\r\n\t\ttry {\r\n\t\t\tconst importedJSON = JSON.parse(value);\r\n\t\t\tonImport(importedJSON);\r\n\r\n\t\t} catch (error) {\r\n\t\t\tonError(`The file could not be read: ${error}.`);\r\n\t\t}\r\n\t}).catch((error) => {\r\n\t\tonError(`The file could not be read: ${error}`);\r\n\t});\r\n}\r\n\r\nexport const exportJSON = (json: unknown, fileName: string) => {\r\n\tconst a = document.createElement('a');\r\n\r\n\ta.href = URL.createObjectURL(new Blob([JSON.stringify(json)], { type: 'text/plain' }));\r\n\r\n\ta.setAttribute('download', fileName);\r\n\r\n\tdocument.body.appendChild(a);\r\n\r\n\ta.click();\r\n\r\n\tdocument.body.removeChild(a);\r\n}\r\n\r\nexport const getImagePath = (bundle: string, imagePath: string) => {\r\n\treturn `\\\\bundles\\\\${bundle}\\\\images\\\\${imagePath}`;\r\n}\r\n\r\n//\r\n// Server-side Only\r\n//\r\n\r\nconst imageExtensions = new Set([ 'png', 'jpg', 'jpeg', 'gif' ]);\r\n\r\nconst isFileExtensionImage = (name: string) => {\r\n\treturn imageExtensions.has(path.extname(name).slice(1).toLowerCase());\r\n}\r\n\r\nexport const getItems = (filePath: string, filter: (value: fs.Dirent) => boolean, recursive?: boolean) => {\r\n\tconst files = fs.readdirSync(filePath, { withFileTypes: true, recursive });\r\n\r\n\treturn files.filter(filter).map(value => {\r\n\t\treturn path.relative(filePath, path.join(value.parentPath || value.path, value.name));\r\n\t});\r\n}\r\n\r\nexport const getDirectories = (filePath: string, recursive?: boolean) => {\r\n\treturn getItems(filePath, (value) => value.isDirectory(), recursive);\r\n}\r\n\r\nexport const getFiles = (path: string, recursive?: boolean) => {\r\n\treturn getItems(path, (value) => value.isFile(), recursive);\r\n}\r\n\r\nexport const getImages = (filePath: string, recursive?: boolean) => {\r\n\treturn getItems(filePath, (value) => { \r\n\t\treturn value.isFile() && isFileExtensionImage(value.name); } , recursive);\r\n}\r\n\r\nexport const updateBundleImages = (bundleImages: BundleImages) => {\r\n\tbundleImages.bundles = getDirectories('bundles');\r\n\r\n\tif(!bundleImages.bundles.includes(bundleImages.selectedBundle)) {\r\n\t\tbundleImages.selectedBundle = bundleImages.bundles[0];\r\n\t}\r\n\r\n\tconst bundlePath = path.join('bundles', path.join(bundleImages.selectedBundle));\r\n\r\n\tconst imagePath = path.join(bundlePath, 'images');\r\n\r\n\tif(fs.existsSync(imagePath)) {\r\n\t\tbundleImages.images = getImages(imagePath, true);\r\n\t}\r\n\telse {\r\n\t\tbundleImages.images = [];\r\n\t}\r\n\r\n\treturn bundleImages;\r\n}","import * as fs from 'fs';\r\nimport { formatTimeHMSC, formatDateHM } from '../helpers/utils';\r\n \r\nexport class Logger {\r\n\tprivate logName: string;\r\n\tprivate stream: fs.WriteStream;\r\n\r\n\tconstructor(logName: string, includeDate: boolean) {\r\n\t\tconst currentTime = new Date();\r\n\t\tconst date = (currentTime.getMonth() + 1) + \"_\" + currentTime.getDate() + \"_\" + currentTime.getFullYear();\r\n\r\n\t\tthis.logName = logName + (includeDate ? `_${date}` : ``);\r\n\t\tthis.stream = fs.createWriteStream(`./logs/${this.logName}.log`, { flags: 'a' });\r\n\t}\r\n\r\n\t//Writes one line of text, then moves to the next line.\r\n\twrite(text: string) {\r\n\t\tif(!this.stream) {\r\n\t\t\tconsole.log(`LOGGER: Error, attempted to write file with non-existant stream!`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.stream.write(text + \"\\n\");\r\n\t}\r\n}\r\n\r\ntype TimeLog = { name: string, time: number, isLabel: boolean };\r\n\r\nexport class TimeLogger extends Logger {\r\n\tprivate timeLog: TimeLog[] = [];\r\n\tprivate recordIndex = -1;\r\n\r\n\taddTime(name: string, time: number, isLabel: boolean = false) {\r\n\r\n\t\tif(this.timeLog.length > 0) {\r\n\t\t\tlet prevTime = this.timeLog[this.timeLog.length - 1];\r\n\r\n\t\t\t//In the event this is just a label, take the name of the previous log if it exists\r\n\t\t\tif(prevTime.isLabel && this.timeLog.length > 1) {\r\n\t\t\t\tprevTime = {...prevTime, name: this.timeLog[this.timeLog.length - 2].name};\r\n\t\t\t}\r\n\r\n\t\t\tconst duration = time - prevTime.time;\r\n\r\n\t\t\tthis.write(`${formatDateHM(new Date(prevTime.time))} - ${prevTime.name} (${formatTimeHMSC(duration)})`);\r\n\r\n\t\t\tif(name.includes(\"Game\")) {\r\n\t\t\t\tlet startofBreakTime = this.timeLog.slice().reverse().find(\r\n\t\t\t\t\t(log, index, array) => {\r\n\t\t\t\t\t\tif(log.isLabel) return true;\r\n\r\n\t\t\t\t\t\t//Next entry in array is the Game scene (reversed)\r\n\t\t\t\t\t\tif(index < array.length - 1 && array[index + 1].name.includes(\"Game\")) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif(!startofBreakTime) {\r\n\t\t\t\t\tstartofBreakTime = this.timeLog[0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst breakTime = time - startofBreakTime.time;\r\n\r\n\t\t\t\tthis.write(`\\nBreak Time: ${formatTimeHMSC(breakTime)}\\n`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.timeLog.push({ name, time, isLabel });\r\n\t}\r\n\r\n\tstartRecord(recordLabel: string, time: number) {\r\n\t\tif(this.recordIndex >= 0) {\r\n\t\t\tconsole.log(`TIMELOGGER: Warning, attempted to start a record while already recording.`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.addTime(recordLabel, time, true);\r\n\r\n\t\tthis.write(`\\n${formatDateHM(new Date(time))} === ${recordLabel} ===\\n`);\r\n\r\n\t\tthis.recordIndex = this.timeLog.length - 1;\r\n\t}\r\n\r\n\tendRecord(recordLabel: string, time: number) {\r\n\t\tif(this.recordIndex < 0) {\r\n\t\t\tconsole.log(`TIMELOGGER: Warning, attempted to finish a record without starting recording.`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.addTime(recordLabel, time, true);\r\n\r\n\t\tthis.write(`\\n${formatDateHM(new Date(time))} === ${recordLabel} ===\\n`);\r\n\r\n\t\tconst totalTime = this.timeLog[this.timeLog.length - 1].time - this.timeLog[this.recordIndex].time; \r\n\t\tconst gameTime = this.timeLog.reduce((accum, log, index, array) => {\r\n\t\t\tif(log.name.includes(\"Game\") && index < array.length - 1) {\r\n\t\t\t\treturn accum + (array[index + 1].time - log.time);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn accum;\r\n\t\t\t}\r\n\t\t}, 0);\r\n\t\tconst breakTime = totalTime - gameTime;\r\n\r\n\t\tthis.write(\"Summary\\n\");\r\n\t\tthis.write(`Total Time: ${formatTimeHMSC(totalTime)}`);\r\n\t\tthis.write(`Game Time: ${formatTimeHMSC(gameTime)}`);\r\n\t\tthis.write(`Break Time: ${formatTimeHMSC(breakTime)}\\n`);\r\n\r\n\t\tthis.recordIndex = -1;\r\n\t}\r\n\r\n}","import { _ as _define_property } from \"./_define_property.js\";\n\nfunction _object_spread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n\n        if (typeof Object.getOwnPropertySymbols === \"function\") {\n            ownKeys = ownKeys.concat(\n                Object.getOwnPropertySymbols(source).filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                })\n            );\n        }\n\n        ownKeys.forEach(function(key) {\n            _define_property(target, key, source[key]);\n        });\n    }\n\n    return target;\n}\nexport { _object_spread as _ };\n","function _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n    } else obj[key] = value;\n\n    return obj;\n}\nexport { _define_property as _ };\n","function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n        var symbols = Object.getOwnPropertySymbols(object);\n        if (enumerableOnly) {\n            symbols = symbols.filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n            });\n        }\n        keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n}\nfunction _object_spread_props(target, source) {\n    source = source != null ? source : {};\n\n    if (Object.getOwnPropertyDescriptors) Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    else {\n        ownKeys(Object(source)).forEach(function(key) {\n            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n    }\n\n    return target;\n}\nexport { _object_spread_props as _ };\n"],"names":["NodeCG","Package","OBSControl","ObsData","BundleImages","TimeLogger","updateBundleImages","nodecg","ServerAPI","console","log","name","version","squidwest","month","bundleImages","Replicant","defaultValue","bundles","selectedBundle","images","value","timeLogger","onConnect","obs","sendMessage","isConnected","onDisconnect","onCurrentProgramSceneChanged","event","sceneName","sceneUuid","timeStamp","Date","now","addTime","onStreamStateChanged","outputActive","outputState","startRecord","endRecord","listenFor","connect","settings","ack","serverIp","serverPort","serverPassword","then","handled","catch","e","oldValue","module","exports","JSON","parse","OBSWebSocket","OBSEventTypes","lerp","clamp","OBSCallback","OBSEventCallback","E","OBSEventCalls","socket","eventCalls","constructor","ip","port","password","Promise","onExitStarted","off","on","bind","Error","message","String","setCurrentProgramScene","scene","call","transitionInputVolume","input","transitionTime","targetDb","startDb","interpFunc","alpha","setInputVolume","inputVolumeDb","getInputVolume","startTime","getTime","setVolumeInterval","setInterval","setTimeout","clearInterval","inputVolumeMul","inputName","dB","ColorInfo","fs","path","formatTimeHMSC","ms","hour","Math","floor","minute","second","centiseconds","formatDateHM","date","getHours","getMinutes","formatDateMDY","getMonth","getDate","getFullYear","modulo","dividend","divisor","getIndexColor","index","list","swap","length","teamA","teamB","a","b","min","max","fileToJSON","acceptedFiles","File","onImport","json","onError","error","file","text","importedJSON","exportJSON","fileName","document","createElement","href","URL","createObjectURL","Blob","stringify","type","setAttribute","body","appendChild","click","removeChild","getImagePath","bundle","imagePath","imageExtensions","Set","isFileExtensionImage","has","extname","slice","toLowerCase","getItems","filePath","filter","Dirent","recursive","files","readdirSync","withFileTypes","map","relative","join","parentPath","getDirectories","isDirectory","getFiles","isFile","getImages","includes","bundlePath","existsSync","Logger","logName","stream","WriteStream","includeDate","currentTime","createWriteStream","flags","write","TimeLog","time","isLabel","timeLog","recordIndex","prevTime","duration","startofBreakTime","reverse","find","array","breakTime","push","recordLabel","totalTime","gameTime","reduce","accum"],"version":3,"file":"index.js.map","sourceRoot":"../"}