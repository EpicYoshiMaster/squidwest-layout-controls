{"mappings":"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","sources":["src/extension/index.ts","package.json","src/extension/OBSControl.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/extension/Logger.ts","node_modules/@swc/helpers/esm/_object_spread.js","node_modules/@swc/helpers/esm/_define_property.js","node_modules/@swc/helpers/esm/_object_spread_props.js","src/helpers/utils.ts"],"sourcesContent":["import NodeCG from '@nodecg/types';\r\nimport Package from '../../package.json'\r\nimport { OBSControl } from './OBSControl';\r\nimport { ObsData } from 'schemas';\r\nimport { Logger, TimeLogger } from './Logger';\r\n\r\nexport = async (nodecg: NodeCG.ServerAPI) => {\r\n\r\n\tconsole.log(`You're using ${Package.name} Version ${Package.version} (${Package.squidwest.month})`);\r\n\r\n\tconst timeLogger = new TimeLogger(`${Package.name}-Time`, true);\r\n\t\r\n\r\n\tconst onConnect = (obs: OBSControl) => {\r\n\t\tnodecg.sendMessage('obsConnectionStatus', { isConnected: true });\r\n\t}\r\n\r\n\tconst onDisconnect = (obs: OBSControl) => {\r\n\t\tnodecg.sendMessage('obsConnectionStatus', { isConnected: false });\r\n\t}\r\n\r\n\tconst onCurrentProgramSceneChanged = (obs: OBSControl, event: {sceneName: string, sceneUuid: string}) => {\r\n\t\tconst timeStamp = Date.now();\r\n\t\tnodecg.sendMessage('onSceneChange', { sceneName: event.sceneName, timeStamp: timeStamp});\r\n\r\n\t\ttimeLogger.addTime(`On OBS Scene: ${event.sceneName}`, timeStamp);\r\n\t}\r\n\r\n\tconst onStreamStateChanged = (obs: OBSControl, event: { outputActive: boolean; outputState: string; }) => {\r\n\t\tif(event.outputActive && event.outputState === 'OBS_WEBSOCKET_OUTPUT_STARTED') {\r\n\t\t\ttimeLogger.startRecord(\"Stream Started\", Date.now());\r\n\t\t}\r\n\t\telse if(!event.outputActive && event.outputState === 'OBS_WEBSOCKET_OUTPUT_STOPPED') {\r\n\t\t\ttimeLogger.endRecord(\"Stream Ended\", Date.now());\r\n\t\t}\r\n\t};\r\n\r\n\tconst obs = new OBSControl({ onConnect, onDisconnect, onCurrentProgramSceneChanged, onStreamStateChanged });\r\n\r\n\tnodecg.listenFor('setObsConnection', (value: { connect: boolean, settings: ObsData }, ack) => {\r\n\r\n\t\tif(value.connect) {\r\n\r\n\t\t\tobs.connect(value.settings.serverIp, value.settings.serverPort, value.settings.serverPassword).then(() => {\r\n\t\t\t\tif(ack && !ack.handled) {\r\n\t\t\t\t\tack(null, \"OBS Connection Successful!\");\r\n\t\t\t\t}\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\tif(ack && !ack.handled) {\r\n\t\t\t\t\tack(e);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t})\r\n\r\n\t/*\r\n\tconst obs = new OBSControl(nodecg);\r\n\r\n\tnodecg.listenFor('Hooray', () => {\r\n\t\tconst easeInExpo = (alpha: number): number => {\r\n            return (alpha <= 0) ? 0 : Math.pow(2, 10 * alpha - 10);\r\n        }\r\n\r\n\t\tconst easeOutExpo = (alpha: number): number => {\r\n\t\t\treturn (alpha >= 1) ? 1 : 1 - Math.pow(2, -10 * alpha);\r\n\t\t}\r\n\r\n\t\tobs.setCurrentProgramScene('Game');\r\n\t\tobs.transitionInputVolume('Music', 3000, -100, 0, easeInExpo);\r\n\t\tobs.transitionInputVolume('Bottom Video Game', 3000, 0, -100, easeOutExpo);\r\n\t});*/\r\n}","{\r\n  \"name\": \"squidwest-layout-controls\",\r\n  \"version\": \"1.1.0\",\r\n  \"squidwest\": {\r\n    \"month\": \"December 2024\"\r\n  },\r\n  \"description\": \"NodeCG Dashboard system for SquidWest Splatoon events\",\r\n  \"homepage\": \"\",\r\n  \"author\": {\r\n    \"name\": \"EpicYoshiMaster\",\r\n    \"email\": \"epicyoshim@gmail.com\",\r\n    \"url\": \"\"\r\n  },\r\n  \"files\": [\r\n    \"dashboard\",\r\n    \"graphics\",\r\n    \"extension.js\",\r\n    \"extension\"\r\n  ],\r\n  \"keywords\": [\r\n    \"nodecg-bundle\"\r\n  ],\r\n  \"nodecg\": {\r\n    \"compatibleRange\": \"^2.0.0\",\r\n    \"dashboardPanels\": [\r\n      {\r\n        \"name\": \"credits\",\r\n        \"title\": \"Credits\",\r\n        \"width\": 3,\r\n        \"file\": \"credits.html\",\r\n        \"workspace\": \"1. Stream Tech\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"intermission\",\r\n        \"title\": \"Intermission Screen\",\r\n        \"width\": 3,\r\n        \"file\": \"intermission.html\",\r\n        \"workspace\": \"1. Stream Tech\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"commentators\",\r\n        \"title\": \"Commentators Information\",\r\n        \"width\": 3,\r\n        \"file\": \"commentators.html\",\r\n        \"workspace\": \"1. Stream Tech\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"time\",\r\n        \"title\": \"Time Information\",\r\n        \"width\": 3,\r\n        \"file\": \"time.html\",\r\n        \"workspace\": \"1. Stream Tech\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"eventinformation\",\r\n        \"title\": \"Event Information\",\r\n        \"width\": 3,\r\n        \"file\": \"eventinformation.html\",\r\n        \"workspace\": \"2. Settings\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"socials\",\r\n        \"title\": \"Socials Information\",\r\n        \"width\": 3,\r\n        \"file\": \"socials.html\",\r\n        \"workspace\": \"2. Settings\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"obs\",\r\n        \"title\": \"OBS Settings\",\r\n        \"width\": 3,\r\n        \"file\": \"obssettings.html\",\r\n        \"workspace\": \"2. Settings\",\r\n        \"headerColor\": \"#525F78\"\r\n      },\r\n      {\r\n        \"name\": \"scores\",\r\n        \"title\": \"Scores\",\r\n        \"width\": 4,\r\n        \"file\": \"scores.html\",\r\n        \"workspace\": \"1. Stream Tech\",\r\n        \"headerColor\": \"#525F78\"\r\n      }\r\n    ]\r\n  },\r\n  \"browserslist\": {\r\n    \"production\": [\r\n      \">0.5%\",\r\n      \"not dead\",\r\n      \"not op_mini all\"\r\n    ],\r\n    \"development\": [\r\n      \"last 1 chrome version\",\r\n      \"last 1 firefox version\",\r\n      \"last 1 safari version\"\r\n    ]\r\n  },\r\n  \"scripts\": {\r\n    \"build\": \"node scripts/build.mjs --all\",\r\n    \"build:extension\": \"node scripts/build.mjs --extension\",\r\n    \"watch\": \"node scripts/build.mjs --all --watch\",\r\n    \"watch:browser\": \"node scripts/build.mjs --dashboard --graphics --watch\",\r\n    \"watch:schemas\": \"node scripts/build.mjs --schemas --watch\",\r\n    \"dev\": \"concurrently --kill-others \\\"npm run watch:schemas\\\" \\\"npm run watch:browser\\\" \\\"nodemon\\\"\",\r\n    \"generate-schema-types\": \"trash src/types/schemas && nodecg schema-types\"\r\n  },\r\n  \"dependencies\": {\r\n    \"@nodecg/react-hooks\": \"^1.0.3\",\r\n    \"@phosphor-icons/react\": \"^2.1.7\",\r\n    \"@types/react\": \"*\",\r\n    \"@types/react-dom\": \"*\",\r\n    \"obs-websocket-js\": \"^5.0.6\",\r\n    \"react\": \"*\",\r\n    \"react-dom\": \"*\",\r\n    \"styled-components\": \"^6.1.13\",\r\n    \"ts-node\": \"*\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@nodecg/types\": \"^2.0.0\",\r\n    \"@parcel/config-default\": \"*\",\r\n    \"@parcel/core\": \"*\",\r\n    \"@parcel/reporter-cli\": \"*\",\r\n    \"@parcel/validator-typescript\": \"*\",\r\n    \"@types/node\": \"^18\",\r\n    \"concurrently\": \"*\",\r\n    \"glob\": \"^10.2.7\",\r\n    \"nodemon\": \"*\",\r\n    \"trash-cli\": \"*\",\r\n    \"typescript\": \"^5.1.3\"\r\n  },\r\n  \"license\": \"MIT\"\r\n}\r\n","import OBSWebSocket, { OBSEventTypes } from 'obs-websocket-js';\r\n\r\nexport type OBSCallback = (obs: OBSControl) => void;\r\nexport type OBSEventCallback<E extends keyof OBSEventTypes> = (obs: OBSControl, event: OBSEventTypes[E]) => void;\r\n\r\nexport type OBSEventCalls = {\r\n    onConnect?: OBSCallback;\r\n    onDisconnect?: OBSCallback;\r\n    onCurrentProgramSceneChanged?: OBSEventCallback<'CurrentProgramSceneChanged'>;\r\n    onStreamStateChanged?: OBSEventCallback<'StreamStateChanged'>;\r\n    //Expand this list as necessities grow\r\n}\r\n\r\nexport class OBSControl {\r\n    private socket: OBSWebSocket;\r\n    private eventCalls: OBSEventCalls;\r\n\r\n    constructor(eventCalls: OBSEventCalls) {\r\n        this.socket = new OBSWebSocket();\r\n        this.eventCalls = eventCalls;\r\n    }\r\n\r\n    async connect(ip: string, port: string, password?: string): Promise<void> {\r\n\r\n        try {\r\n            await this.socket.connect(`ws://${ip}:${port}`, password);\r\n\r\n            console.log(\"OBS Connected\");\r\n\r\n            if(this.eventCalls.onConnect) {\r\n                this.eventCalls.onConnect(this);\r\n            }\r\n\r\n            const onExitStarted = () => { \r\n                console.log(\"OBS Disconnected\");\r\n\r\n                if(this.eventCalls.onDisconnect) {\r\n                    this.eventCalls.onDisconnect(this); \r\n                }\r\n                \r\n                this.socket.off('ExitStarted', onExitStarted);\r\n            }\r\n\r\n            this.socket.on('ExitStarted', onExitStarted)\r\n                .on('CurrentProgramSceneChanged', this.onCurrentProgramSceneChanged.bind(this))\r\n                .on('StreamStateChanged', this.onStreamStateChanged.bind(this));\r\n        }\r\n        catch(e) {\r\n            throw new Error(`OBS Connection Failed: ${e instanceof Error ? e.message : String(e)}`);\r\n        }\r\n    }\r\n\r\n    //\r\n    // Events\r\n    //\r\n\r\n    private onCurrentProgramSceneChanged(event: { sceneName: string, sceneUuid: string }) {\r\n        if(this.eventCalls.onCurrentProgramSceneChanged) { \r\n            this.eventCalls.onCurrentProgramSceneChanged(this, event);\r\n        }\r\n    }\r\n\r\n    private onStreamStateChanged(event: { outputActive: boolean, outputState: string }) {\r\n        if(this.eventCalls.onStreamStateChanged) { \r\n            this.eventCalls.onStreamStateChanged(this, event);\r\n        }\r\n    }\r\n\r\n    //\r\n    // Requests\r\n    //\r\n\r\n    setCurrentProgramScene(scene: string): Promise<void> {\r\n        return this.socket.call('SetCurrentProgramScene', {sceneName: scene});\r\n    }\r\n\r\n    async transitionInputVolume(input: string, transitionTime: number, targetDb: number, startDb?: number, interpFunc?: (alpha: number) => number) {\r\n        if(startDb) {\r\n            await this.setInputVolume(input, startDb);\r\n        }\r\n\r\n        const { inputVolumeDb } = await this.getInputVolume(input);\r\n\r\n        let startTime = new Date().getTime();\r\n\r\n        const lerp = (a: number, b: number, alpha: number) => { return a + alpha * (b - a)};\r\n        const clamp = (value: number, min: number, max: number) => { return Math.min(Math.max(value, min), max)};\r\n\r\n        let setVolumeInterval = setInterval(() => { \r\n            const alpha = (new Date().getTime() - startTime) / transitionTime;\r\n            this.setInputVolume(input, lerp(inputVolumeDb, targetDb, clamp(interpFunc ? interpFunc(alpha) : alpha, 0, 1)));\r\n            console.log(`${input} - alpha: ${alpha}, dB: ${lerp(inputVolumeDb, targetDb, clamp(interpFunc ? interpFunc(alpha) : alpha, 0, 1))}`);\r\n        }, 10);\r\n\r\n        await setTimeout(() => {\r\n            clearInterval(setVolumeInterval)\r\n            this.setInputVolume(input, targetDb);\r\n            console.log(`${input} - DONE, dB: ${targetDb}`);\r\n        }, transitionTime);\r\n    }\r\n\r\n    getInputVolume(input: string): Promise<{inputVolumeDb: number, inputVolumeMul: number}> {\r\n        return this.socket.call('GetInputVolume', {inputName: input});\r\n    }\r\n\r\n    setInputVolume(input: string, dB: number): Promise<void> {\r\n        return this.socket.call('SetInputVolume', {inputName: input, inputVolumeDb: dB});\r\n    }\r\n}","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import * as fs from 'fs';\r\nimport { formatTimeHMSC, formatDateHM } from '../helpers/utils';\r\n \r\nexport class Logger {\r\n\tprivate logName: string;\r\n\tprivate stream: fs.WriteStream;\r\n\r\n\tconstructor(logName: string, includeDate: boolean) {\r\n\t\tconst currentTime = new Date();\r\n\t\tconst date = (currentTime.getMonth() + 1) + \"_\" + currentTime.getDate() + \"_\" + currentTime.getFullYear();\r\n\r\n\t\tthis.logName = logName + (includeDate ? `_${date}` : ``);\r\n\t\tthis.stream = fs.createWriteStream(`./logs/${this.logName}.log`, { flags: 'a' });\r\n\t}\r\n\r\n\t//Writes one line of text, then moves to the next line.\r\n\twrite(text: string) {\r\n\t\tif(!this.stream) {\r\n\t\t\tconsole.log(`LOGGER: Error, attempted to write file with non-existant stream!`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.stream.write(text + \"\\n\");\r\n\t}\r\n}\r\n\r\ntype TimeLog = { name: string, time: number, isLabel: boolean };\r\n\r\nexport class TimeLogger extends Logger {\r\n\tprivate timeLog: TimeLog[] = [];\r\n\tprivate recordIndex = -1;\r\n\r\n\taddTime(name: string, time: number, isLabel: boolean = false) {\r\n\r\n\t\tif(this.timeLog.length > 0) {\r\n\t\t\tlet prevTime = this.timeLog[this.timeLog.length - 1];\r\n\r\n\t\t\t//In the event this is just a label, take the name of the previous log if it exists\r\n\t\t\tif(prevTime.isLabel && this.timeLog.length > 1) {\r\n\t\t\t\tprevTime = {...prevTime, name: this.timeLog[this.timeLog.length - 2].name};\r\n\t\t\t}\r\n\r\n\t\t\tconst duration = time - prevTime.time;\r\n\r\n\t\t\tthis.write(`${formatDateHM(new Date(prevTime.time))} - ${prevTime.name} (${formatTimeHMSC(duration)})`);\r\n\r\n\t\t\tif(name.includes(\"Game\")) {\r\n\t\t\t\tlet startofBreakTime = this.timeLog.slice().reverse().find(\r\n\t\t\t\t\t(log, index, array) => {\r\n\t\t\t\t\t\tif(log.isLabel) return true;\r\n\r\n\t\t\t\t\t\t//Next entry in array is the Game scene (reversed)\r\n\t\t\t\t\t\tif(index < array.length - 1 && array[index + 1].name.includes(\"Game\")) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif(!startofBreakTime) {\r\n\t\t\t\t\tstartofBreakTime = this.timeLog[0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst breakTime = time - startofBreakTime.time;\r\n\r\n\t\t\t\tthis.write(`\\nBreak Time: ${formatTimeHMSC(breakTime)}\\n`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.timeLog.push({ name, time, isLabel });\r\n\t}\r\n\r\n\tstartRecord(recordLabel: string, time: number) {\r\n\t\tif(this.recordIndex >= 0) {\r\n\t\t\tconsole.log(`TIMELOGGER: Warning, attempted to start a record while already recording.`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.addTime(recordLabel, time, true);\r\n\r\n\t\tthis.write(`\\n${formatDateHM(new Date(time))} === ${recordLabel} ===\\n`);\r\n\r\n\t\tthis.recordIndex = this.timeLog.length - 1;\r\n\t}\r\n\r\n\tendRecord(recordLabel: string, time: number) {\r\n\t\tif(this.recordIndex < 0) {\r\n\t\t\tconsole.log(`TIMELOGGER: Warning, attempted to finish a record without starting recording.`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.addTime(recordLabel, time, true);\r\n\r\n\t\tthis.write(`\\n${formatDateHM(new Date(time))} === ${recordLabel} ===\\n`);\r\n\r\n\t\tconst totalTime = this.timeLog[this.timeLog.length - 1].time - this.timeLog[this.recordIndex].time; \r\n\t\tconst gameTime = this.timeLog.reduce((accum, log, index, array) => {\r\n\t\t\tif(log.name.includes(\"Game\") && index < array.length - 1) {\r\n\t\t\t\treturn accum + (array[index + 1].time - log.time);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn accum;\r\n\t\t\t}\r\n\t\t}, 0);\r\n\t\tconst breakTime = totalTime - gameTime;\r\n\r\n\t\tthis.write(\"Summary\\n\");\r\n\t\tthis.write(`Total Time: ${formatTimeHMSC(totalTime)}`);\r\n\t\tthis.write(`Game Time: ${formatTimeHMSC(gameTime)}`);\r\n\t\tthis.write(`Break Time: ${formatTimeHMSC(breakTime)}\\n`);\r\n\r\n\t\tthis.recordIndex = -1;\r\n\t}\r\n\r\n}","import { _ as _define_property } from \"./_define_property.js\";\n\nfunction _object_spread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n\n        if (typeof Object.getOwnPropertySymbols === \"function\") {\n            ownKeys = ownKeys.concat(\n                Object.getOwnPropertySymbols(source).filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                })\n            );\n        }\n\n        ownKeys.forEach(function(key) {\n            _define_property(target, key, source[key]);\n        });\n    }\n\n    return target;\n}\nexport { _object_spread as _ };\n","function _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n    } else obj[key] = value;\n\n    return obj;\n}\nexport { _define_property as _ };\n","function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n        var symbols = Object.getOwnPropertySymbols(object);\n        if (enumerableOnly) {\n            symbols = symbols.filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n            });\n        }\n        keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n}\nfunction _object_spread_props(target, source) {\n    source = source != null ? source : {};\n\n    if (Object.getOwnPropertyDescriptors) Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    else {\n        ownKeys(Object(source)).forEach(function(key) {\n            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n    }\n\n    return target;\n}\nexport { _object_spread_props as _ };\n","import { ColorInfo } from \"schemas\";\r\n\r\nexport const formatTimeHMSC = (ms: number): string => {\r\n\tms = ms > 0 ? ms : 0;\r\n\r\n\tconst hour = Math.floor(ms / 60 / 60 / 1000);\r\n\tms = ms % (60 * 60 * 1000);\r\n\r\n\tconst minute = Math.floor(ms / 60 / 1000);\r\n\tms = ms % (60 * 1000);\r\n\r\n\tconst second = Math.floor(ms / 1000);\r\n\tms = ms % 1000;\r\n\r\n\tconst centiseconds = Math.floor(ms / 10);\r\n\r\n\treturn `${hour}:${minute < 10 ? `0${minute}` : minute}:${second < 10 ? `0${second}` : second}.${centiseconds < 10 ? `0${centiseconds}` : centiseconds}`\r\n}\r\n\r\nexport const formatDateHM = (date: Date) => {\r\n\treturn date.getHours() + \":\" + ((date.getMinutes() < 10) ? \"0\" : \"\") + date.getMinutes();\r\n};\r\n\r\nexport const formatDateMDY = (date: Date) => {\r\n\treturn (date.getMonth() + 1) + \"/\" + date.getDate() + \"/\" + date.getFullYear();\r\n}\r\n\r\nexport const modulo = (dividend: number, divisor: number) => {\r\n\treturn ((dividend % divisor) + divisor) % divisor;\r\n}\r\n\r\nexport const getIndexColor = (index: number, list: ColorInfo[], swap: boolean) => {\r\n\treturn !swap ? list[modulo(index, list.length)].teamA : list[modulo(index, list.length)].teamB;\r\n}"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../"}